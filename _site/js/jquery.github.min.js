/*
 *  jQuery Github - v0.2.9
 *  A jQuery plugin to display your Github Repositories.
 *  https://github.com/zenorocha/jquery-github/
 *
 *  Copyright (c) 2013
 *  MIT License
 */
(function(e,t){function a(t,a){var o=this;o.element=t,o.$container=e(t),o.repo=o.$container.attr("data-repo"),o.options=e.extend({},r,a),o._defaults=r,o._name=s,o.init()}var s="github",r=(t.document,{propertyName:"value",username:null,elClass:"github-box-wrap"});a.prototype.init=function(){var e=this,t=e.getCache();null!==t?e.applyTemplate(JSON.parse(t)):e.requestData(e.repo)},a.prototype.applyTemplate=function(t){var a,s=this;Array.isArray(t)===!0?t.forEach(function(t){var r=e(e.parseHTML("<div data-repo='"+s.options.username+"/"+t.name+"' class='"+s.options.elClass+"'></div>"));r.appendTo(s.$container),a=s.parseTemplate(t),a.appendTo(r)}):(a=s.parseTemplate(t),a.appendTo(s.$container))},a.prototype.cacheResults=function(e){var a=this;t.sessionStorage&&t.sessionStorage.setItem("gh-repos:"+a.repo,JSON.stringify(e))},a.prototype.getCache=function(){var e=this;return t.sessionStorage?t.sessionStorage.getItem("gh-repos:"+e.repo):!1},a.prototype.handlerErrorRequests=function(e){console.warn(e.message)},a.prototype.handlerSuccessfulRequest=function(e){var t=this;t.applyTemplate(e),t.cacheResults(e)},a.prototype.parsePushedDate=function(e){var t=new Date(e);return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()},a.prototype.parseRepositoryURL=function(e){return e.replace("api.","").replace("repos/","")},a.prototype.parseTemplate=function(t){var a=this,s=a.parsePushedDate(t.pushed_at),r=a.parseRepositoryURL(t.url);return e(e.parseHTML(" 			<div class='github-box'>  				<div class='github-box-header'> 					<h3> 						<a href='"+r+"'>"+t.name+"</a> 					</h3> 					<div class='github-stats'> 						<a class='repo-watchers' href='"+r+"/watchers'>"+t.watchers+"</a> 						<a class='repo-forks' href='"+r+"/network'>"+t.forks+"</a> 					</div> 				</div> 				<div class='github-box-content'> 					<p>"+t.description+" &mdash; <a href='"+r+"#readme'>Read More</a></p> 				</div> 				<div class='github-box-download'> 					<p class='repo-update'>Latest commit to <strong>master</strong> on "+s+"</p> 					<a class='repo-download' href='"+r+"/zipball/master'>Download as zip</a> 				</div> 			</div> 		  "))},a.prototype.requestData=function(t){var a=this,s="https://api.github.com/repos/"+t;null!==a.options.username&&(s="https://api.github.com/users/"+a.options.username+"/repos"),e.ajax({url:s,dataType:"jsonp",success:function(e){var t=e.data;e.meta.status>=400&&t.message?a.handlerErrorRequest():a.handlerSuccessfulRequest(t)}})},e.fn[s]=function(t){return this.each(function(){e.data(this,"plugin_"+s)||e.data(this,"plugin_"+s,new a(this,t))})}})(jQuery,window);